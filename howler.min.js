/*!
 *  howler.js v1.1.0-b4
 *  howlerjs.com
 *
 *  (c) 2013, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
(function(){var e={};var t=null,n=true;if(typeof AudioContext!=="undefined"){t=new AudioContext}else if(typeof webkitAudioContext!=="undefined"){t=new webkitAudioContext}else{n=false}if(n){var r=typeof t.createGain==="undefined"?t.createGainNode():t.createGain();r.gain.value=1;r.connect(t.destination)}var i=function(){this._volume=1;this._muted=false;this.usingWebAudio=n};i.prototype={volume:function(t){var i=this;t=parseFloat(t,10);if(t&&t>=0&&t<=1){i._volume=t;if(n){r.gain.value=t}for(var s in e){if(e.hasOwnProperty(s)&&e[s]._webAudio===false){for(var o=0;o<e[s]._audioNode.length;o++){e[s]._audioNode[o].volume=e[s]._volume*i._volume}}}return i}else{if(n){return r.gain.value}else{return i._volume}}},mute:function(){var t=this;t._muted=true;if(n){r.gain.value=0}for(var i in e){if(e.hasOwnProperty(i)&&e[i]._webAudio===false){for(var s=0;s<e[i]._audioNode.length;s++){e[i]._audioNode[s].volume=0}}}return t},unmute:function(){var t=this;t._muted=false;if(n){r.gain.value=t._volume}for(var i in e){if(e.hasOwnProperty(i)&&e[i]._webAudio===false){for(var s=0;s<e[i]._audioNode.length;s++){e[i]._audioNode[s].volume=e[i]._volume*t._volume}}}return t}};window.Howler=new i;var s=new Audio;var o={mp3:!!s.canPlayType("audio/mpeg;").replace(/^no$/,""),ogg:!!s.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!s.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(s.canPlayType("audio/x-m4a;")||s.canPlayType("audio/aac;")).replace(/^no$/,""),webm:!!s.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")};s=null;var u=window.Howl=function(e){var t=this;t._autoplay=e.autoplay||false;t._buffer=e.buffer||false;t._duration=e.duration||0;t._loop=e.loop||false;t._loaded=false;t._sprite=e.sprite||{};t._src=e.src||"";t._pos3d=e.pos3d||[0,0,-.5];t._volume=e.volume||1;t._urls=e.urls||[];t._onload=[e.onload||function(){}];t._onend=[e.onend||function(){}];t._onpause=[e.onpause||function(){}];t._onplay=[e.onplay||function(){}];t._onendTimer=[];t._webAudio=n&&!t._buffer;t._audioNode=[];if(t._webAudio){t._setupAudioNode()}t.load()};u.prototype={load:function(){var t=this,n=null;for(var r=0;r<t._urls.length;r++){var i=t._urls[r].toLowerCase().match(/.+\.([^?]+)(\?|$)/),s=false;i=i&&i.length>=2?i[1]:t._urls[r].toLowerCase().match(/data\:audio\/([^?]+);/)[1];switch(i){case"mp3":s=o.mp3;break;case"ogg":s=o.ogg;break;case"wav":s=o.wav;break;case"m4a":s=o.m4a;break;case"weba":s=o.webm;break}if(s===true){n=t._urls[r];break}}if(!n){return}t._src=n;if(t._webAudio){a(t,n)}else{var u=new Audio;t._audioNode.push(u);u.src=n;u._pos=0;u.preload="auto";u.volume=Howler._muted?0:t._volume*Howler.volume();e[n]=t;var f=function(){t._duration=u.duration;if(Object.getOwnPropertyNames(t._sprite).length===0){t._sprite={_default:[0,t._duration*1e3]}}if(!t._loaded){t._loaded=true;t.on("load")}if(t._autoplay){t.play()}u.removeEventListener("canplaythrough",f,false)};u.addEventListener("canplaythrough",f,false);u.load()}return t},urls:function(e){var t=this;if(e){t._urls=e;t.stop();t.load();return t}else{return t._urls}},play:function(e,n){var r=this;if(!e){e="_default"}if(!r._loaded){r.on("load",function(){r.play(e,n)});return r}if(!r._sprite[e]){if(typeof n==="function")n();return r}r._inactiveNode(function(i){i._sprite=e;var s=i._pos>0?i._pos:r._sprite[e][0]/1e3,o=r._sprite[e][1]/1e3-i._pos;var u=!!(r._loop||r._sprite[e][2]);var a=typeof n==="string"?n:Math.round(Date.now()*Math.random())+"",f;(function(){var t={id:a,sprite:e,loop:u};f=setTimeout(function(){if(!r._webAudio&&u){r.stop(t.id).play(e,t.id)}if(r._webAudio&&!u){r._nodeById(t.id).paused=true}if(!r._webAudio){r.pause(t.id,t.timer)}r.on("end")},o*1e3);r._onendTimer.push(f);t.timer=r._onendTimer[r._onendTimer.length-1]})();if(r._webAudio){i.id=a;i.paused=false;l(r,[u,s,o],a);r._playStart=t.currentTime;if(typeof i.bufferSource.start==="undefined"){i.bufferSource.noteGrainOn(0,s,o)}else{i.bufferSource.start(0,s,o)}}else{if(i.readyState===4){i.id=a;i.currentTime=s;i.play()}else{r._clearEndTimer(f);(function(){var t=r,s=e,o=n,u=i;var a=function(){t.play(s,o);u.removeEventListener("canplaythrough",a,false)};u.addEventListener("canplaythrough",a,false)})();return r}}r.on("play");if(typeof n==="function")n(a);return r})},pause:function(e,n){var r=this;if(!r._loaded){r.on("play",function(){r.pause(e)});return r}r._clearEndTimer(n);var i=e?r._nodeById(e):r._activeNode();if(i){if(r._webAudio){if(!i.bufferSource){return r}i.paused=true;i._pos+=t.currentTime-r._playStart;if(typeof i.bufferSource.stop==="undefined"){i.bufferSource.noteOff(0)}else{i.bufferSource.stop(0)}}else{i._pos=i.currentTime;i.pause()}}r.on("pause");return r},stop:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.stop(e)});return t}t._clearEndTimer(0);var n=e?t._nodeById(e):t._activeNode();if(n){n._pos=0;if(t._webAudio){if(!n.bufferSource){return t}n.paused=true;if(typeof n.bufferSource.stop==="undefined"){n.bufferSource.noteOff(0)}else{n.bufferSource.stop(0)}}else{n.pause();n.currentTime=0}}return t},mute:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.mute(e)});return t}var n=e?t._nodeById(e):t._activeNode();if(n){if(t._webAudio){n.gain.value=0}else{n.volume=0}}return t},unmute:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.unmute(e)});return t}var n=e?t._nodeById(e):t._activeNode();if(n){if(t._webAudio){n.gain.value=t._volume}else{n.volume=t._volume}}return t},volume:function(e,t){var n=this;e=parseFloat(e,10);if(!n._loaded){n.on("play",function(){n.volume(e,t)});return n}if(e>=0&&e<=1){n._volume=e;var r=t?n._nodeById(t):n._activeNode();if(r){if(n._webAudio){r.gain.value=e}else{r.volume=e*Howler.volume()}}return n}else{return n._volume}},loop:function(e){var t=this;if(typeof e==="boolean"){t._loop=e;return t}else{return t._loop}},sprite:function(e){var t=this;if(typeof e==="object"){t._sprite=e;return t}else{return t._sprite}},pos:function(e,n){var r=this;if(!r._loaded){r.on("load",function(){r.pos(e)});return r}var i=n?r._nodeById(n):r._activeNode();if(i){if(r._webAudio){if(e>=0){i._pos=e;r.pause(n).play(node._sprite,n);return r}else{return i._pos+(t.currentTime-r._playStart)}}else{if(e>=0){i.currentTime=e;return r}else{return i.currentTime}}}},pos3d:function(e,t,n,r){var i=this;t=typeof t==="undefined"||!t?0:t;n=typeof n==="undefined"||!n?-.5:n;if(!i._loaded){i.on("play",function(){i.pos3d(e,t,n,r)});return i}if(e>=0||e<0){if(i._webAudio){var s=r?i._nodeById(r):i._activeNode();if(s){i._pos3d=[e,t,n];s.panner.setPosition(e,t,n)}}}else{return i._pos3d}return i},fadeIn:function(e,t,n){var r=this,i=e,s=i/.01,o=t/s;if(!r._loaded){r.on("load",function(){r.fadeIn(e,t,n)});return r}r.volume(0).play();for(var u=1;u<=s;u++){(function(){var t=Math.round(1e3*(r._volume+.01*u))/1e3,i=e;setTimeout(function(){r.volume(t);if(t===i){if(n)n()}},o*u)})()}return r},fadeOut:function(e,t,n,r){var i=this,s=i._volume-e,o=s/.01,u=t/o;if(!i._loaded){i.on("play",function(){i.fadeOut(e,t,n,r)});return i}for(var a=1;a<=o;a++){(function(){var t=Math.round(1e3*(i._volume-.01*a))/1e3,s=e;setTimeout(function(){i.volume(t,r);if(t===s){if(n)n();i.pause(r);i.on("end")}},u*a)})()}return i},_nodeById:function(e){var t=this,n=t._audioNode[0];for(var r=0;r<t._audioNode.length;r++){if(t._audioNode[r].id===e){n=t._audioNode[r];break}}return n},_activeNode:function(){var e=this,t=null;for(var n=0;n<e._audioNode.length;n++){if(!e._audioNode[n].paused){t=e._audioNode[n];break}}e._drainPool();return t},_inactiveNode:function(e){var t=this,n=null;for(var r=0;r<t._audioNode.length;r++){if(t._audioNode[r].paused&&t._audioNode[r].readyState===4){e(t._audioNode[r]);n=true;break}}t._drainPool();if(n){return}var i;if(t._webAudio){i=t._setupAudioNode();e(i)}else{t.load();i=t._audioNode[t._audioNode.length-1];i.addEventListener("loadedmetadata",function(){e(i)})}},_drainPool:function(){var e=this,t=0,n;for(n=0;n<e._audioNode.length;n++){if(e._audioNode[n].paused){t++}}for(n=0;n<e._audioNode.length;n++){if(t<=5){break}if(e._audioNode[n].paused){t--;e._audioNode.splice(n,1)}}},_clearEndTimer:function(e){var t=this,n=t._onendTimer.indexOf(e);n=n>=0?n:0;if(t._onendTimer[n]){clearTimeout(t._onendTimer[n]);t._onendTimer.splice(n,1)}},_setupAudioNode:function(){var e=this,n=e._audioNode,i=e._audioNode.length;n[i]=typeof t.createGain==="undefined"?t.createGainNode():t.createGain();n[i].gain.value=e._volume;n[i].paused=true;n[i]._pos=0;n[i].readyState=4;n[i].connect(r);n[i].panner=t.createPanner();n[i].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]);n[i].panner.connect(n[i]);return n[i]},on:function(e,t){var n=this,r=n["_on"+e];if(t){r.push(t)}else{for(var i=0;i<r.length;i++){r[i].call(n)}}return n},off:function(e,t){var n=this,r=n["_on"+e],i=t.toString();for(var s=0;s<r.length;s++){if(i===r[s].toString()){r.splice(s,1);break}}return n}};if(n){var a=function(n,r){if(r in e){n._duration=e[r].duration;f(n)}else{var i=new XMLHttpRequest;i.open("GET",r,true);i.responseType="arraybuffer";i.onload=function(){t.decodeAudioData(i.response,function(t){if(t){e[r]=t;f(n,t)}})};i.onerror=function(){if(n._webAudio){n._buffer=true;n._webAudio=false;n._audioNode=[];delete n._gainNode;n.load()}};try{i.send()}catch(s){i.onerror()}}};var f=function(e,t){e._duration=t?t.duration:e._duration;if(Object.getOwnPropertyNames(e._sprite).length===0){e._sprite={_default:[0,e._duration*1e3]}}if(!self._loaded){e._loaded=true;e.on("load")}if(e._autoplay){e.play()}};var l=function(n,r,i){var s=n._nodeById(i);s.bufferSource=t.createBufferSource();s.bufferSource.buffer=e[n._src];s.bufferSource.connect(s.panner);s.bufferSource.loop=r[0];if(r[0]){s.bufferSource.loopStart=r[1];s.bufferSource.loopEnd=r[1]+r[2]}}}if(typeof define=="function"&&define.amd){define("Howler",function(){return Howler});define("Howl",function(){return u})}})()